extends ../../layouts/default.pug

block main
  .container.mt-4
    .d-flex.justify-content-between.align-items-center.mb-4
      h2.mb-0 Chi tiết danh mục
      button.btn.btn-dark#btn-edit(valueCurrent="readonly")
        i.fas.fa-sync-alt.me-1
        | Cập nhật

    form(method="POST", action=`${prefixAdmin}/categories/edit/${category.id}?_method=PATCH`, enctype="multipart/form-data", form-edit)
      .row
        .col-md-6.mb-3
          label.form-label(for="title") Tên danh mục
          input.form-control(type="text", name="title", id="title", required, value=category.title || '')

        .col-md-6.mb-3
          label.form-label(for="slug") Đường dẫn (slug)
          input.form-control(type="text", name="slug", id="slug", value=category.slug || '')

      .mb-3
        label.form-label Ảnh đại diện

        ul.nav.nav-tabs(role="tablist")
          li.nav-item
            button.nav-link.active(type="button", data-bs-toggle="tab", data-bs-target="#tabUrl") Nhập URL
          li.nav-item
            button.nav-link(type="button", data-bs-toggle="tab", data-bs-target="#tabUpload") Upload từ máy

        .tab-content.border.rounded.p-3.mt-2
          .tab-pane.fade.show.active#tabUrl
            input.form-control(type="text", name="imageUrl", placeholder="Nhập URL ảnh...", value=category.image || '', oninput="previewImageUrl(this.value)")
            .mt-2#urlPreview
              if category.image
                img(src=category.image, style="width: 100px; height: 100px; object-fit: cover; border-radius: 6px")

          .tab-pane.fade#tabUpload
            input.form-control(type="file", name="imageFile", accept="image/*", onchange="previewImageFile(event)")
            .mt-2#uploadPreview

      .mb-3
        label.form-label(for="description") Mô tả
        textarea.form-control.tiny-mce(name="description", id="description", rows="5")= category.description || ''

      button.btn.d-none.btn-dark#btn-submit-edit(type="submit")
        i.fas.fa-save.me-1
        | Cập nhật danh mục

      a.btn.btn-secondary.ms-2(href=`${prefixAdmin}/categories`) Hủy
